
## ğŸ SQL Injection (SQLi)

---

## Introduction

La <span class="concept">SQL Injection (SQLi)</span> est lâ€™une des failles Web les plus connues â€” et toujours critique lorsquâ€™exploitÃ©e.

Elle permet Ã  un attaquant de manipuler des requÃªtes SQL pour :
- Exfiltrer des donnÃ©es
- Bypass lâ€™authentification
- Prendre le contrÃ´le de lâ€™application
- Potentiellement exÃ©cuter du code sur le serveur

Le pentester doit savoir :
- DÃ©tecter les diffÃ©rents types de SQLi
- Construire des payloads adaptÃ©s
- Qualifier lâ€™impact rÃ©el

---

## Objectifs

- <span class="goal">Identifier des points dâ€™injection SQL</span>
- <span class="goal">Qualifier le type de SQLi</span>
- <span class="goal">Obtenir des donnÃ©es sensibles ou contrÃ´le</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">Burp Suite (Repeater)</span> | Injection manuelle et fuzzing |
| <span class="technology">sqlmap</span> | <span class="example">sqlmap -u target --dbs</span> |
| <span class="technology">sqlninja</span> | CiblÃ© SQL Server |
| <span class="technology">NoSQLMap</span> | Injection MongoDB, NoSQL |
| <span class="technology">BBOT</span> | Recon + endpoints potentiellement vulnÃ©rables |
| <span class="technology">Wafw00f</span> | DÃ©tection de WAF |
| <span class="technology">Arjun</span> | ParamÃ¨tre discovery |

---

## Types de SQLi

| Type | Exemple |
|------|---------|
| <span class="concept">Error-Based SQLi</span> | RequÃªte provoquant un message dâ€™erreur SQL |
| <span class="concept">Union-Based SQLi</span> | Utilisation de UNION pour lire dâ€™autres tables |
| <span class="concept">Boolean-Based Blind</span> | RÃ©ponse modifiÃ©e selon vrai / faux |
| <span class="concept">Time-Based Blind</span> | Utilisation de DELAY pour dÃ©tecter injection |
| <span class="concept">Out-Of-Band (OOB)</span> | Exploitation via DNS / HTTP hors bande |
| <span class="concept">NoSQL Injection</span> | Exploitation base MongoDB / NoSQL |

---

## Techniques clÃ©s

| Technique | Outil |
|-----------|------|
| <span class="concept">Injection manuelle</span> | Burp Repeater |
| <span class="concept">Automated discovery</span> | sqlmap |
| <span class="concept">Fuzz param discovery</span> | Arjun |
| <span class="concept">Bypass WAF</span> | Burp, sqlmap tamper scripts |
| <span class="concept">Blind SQLi exploitation</span> | sqlmap |
| <span class="concept">NoSQL fuzzing</span> | NoSQLMap |

---

## Bonnes pratiques

- <span class="best-practice">Toujours identifier le SGBD (MySQL, MSSQL, Oracle...)</span>
- <span class="best-practice">PrÃ©fÃ©rer la validation manuelle avant automatisation</span>
- <span class="best-practice">Limiter le bruit sur les cibles prod</span>
- <span class="best-practice">Documenter lâ€™impact rÃ©el (data extract / bypass)</span>
- <span class="mitigation">Ã‰viter les full tests sur login (risque de lockout)</span>

---

## ğŸ¯ Exemple de scÃ©nario

> <span class="note">ğŸ Cible :</span> Web app CRM vulnÃ©rable

Actions :
- <span class="technology">Arjun</span> â†’ dÃ©couverte param `id_client`
- <span class="technology">Burp Repeater</span> â†’ injection simple `' OR 1=1--`
- <span class="technology">sqlmap -u target?id_client=1 --dbs</span> â†’ Union-Based SQLi validÃ©
- Extraction complÃ¨te de la DB client
- Tentative de blind time-based â†’ DELAY fonctionne
- Rapport complet avec captures et payloads

---

## Cheatlist SQLi

| Type | Outils |
|------|--------|
| Error-Based | Burp, sqlmap |
| Union | sqlmap, manual |
| Blind (boolean / time) | sqlmap |
| Out-of-band | sqlmap + DNS exploit |
| NoSQL | NoSQLMap, Burp |

---

## ğŸš€ Navigation

- ğŸš€ [[05_SSRF]]
- ğŸš€ [[06_IDOR]]
