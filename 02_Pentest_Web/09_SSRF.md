
## 🌐 SSRF (Server-Side Request Forgery)

---

## Introduction

Le <span class="concept">SSRF</span> est une vulnérabilité permettant à un attaquant de forcer le serveur cible à émettre des requêtes vers d’autres ressources.

Elle peut permettre :
- D’exfiltrer des données internes
- D’atteindre des réseaux internes (pivot)
- De contourner des ACL
- D’obtenir un accès aux metadata services (cloud SSRF)

Très critique dans les architectures cloud / microservices / API REST.

---

## Objectifs

- <span class="goal">Identifier des points d’injection SSRF</span>
- <span class="goal">Explorer l’internal network via SSRF</span>
- <span class="goal">Exploiter l’impact maximum (pivot, RCE...)</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">Burp Suite (Repeater, Collaborator)</span> | Fuzz et détection SSRF |
| <span class="technology">SSRFmap</span> | <span class="example">ssrfmap -u target --exploit aws</span> |
| <span class="technology">ffuf</span> | <span class="example">ffuf -u target?url=FUZZ -w urls.txt</span> |
| <span class="technology">feroxbuster</span> | Mapping large |
| <span class="technology">Param Miner</span> | Détection de params vulnérables |
| <span class="technology">bbot</span> | Recon avancée |
| <span class="technology">dnslog.cn / Burp Collaborator</span> | Blind SSRF tracking |

---

## Types de SSRF

| Type | Exemple |
|------|---------|
| <span class="concept">Basic SSRF</span> | Param URL vulnérable (`url=http://internal`) |
| <span class="concept">Auth Bypass SSRF</span> | Utiliser SSRF pour contourner auth interne |
| <span class="concept">Blind SSRF</span> | Détectée uniquement via DNS exfil |
| <span class="concept">Cloud SSRF</span> | Exploitation metadata AWS, GCP, Azure |
| <span class="concept">Advanced SSRF</span> | Chained SSRF → RCE / Pivot |

---

## Techniques clés

| Technique | Outil |
|-----------|------|
| <span class="concept">Basic injection</span> | Burp, Repeater |
| <span class="concept">Blind tracking</span> | Burp Collaborator |
| <span class="concept">Automated scan</span> | SSRFmap |
| <span class="concept">Param discovery</span> | Param Miner |
| <span class="concept">Bypass filters</span> | Manual + encoding + ffuf |
| <span class="concept">Cloud metadata exploitation</span> | SSRFmap aws/gcp |

---

## Bonnes pratiques

- <span class="best-practice">Vérifier les IP ranges internes atteints</span> (127.0.0.1, 169.254...)</span>
- <span class="best-practice">Utiliser Burp Collaborator pour Blind SSRF</span>
- <span class="best-practice">Documenter toutes les étapes de pivot / réseau atteint</span>
- <span class="mitigation">Limiter les requêtes répétitives en prod</span>
- <span class="best-practice">Tester les metadata services (cloud)</span>

---

## 🎯 Exemple de scénario

> <span class="note">🌐 Cible :</span> Plateforme SaaS multi-tenant

Actions :
- <span class="technology">Param Miner</span> → découverte param `img_url`
- <span class="technology">Burp Repeater</span> → test SSRF → accès interne confirmé
- <span class="technology">Burp Collaborator</span> → Blind SSRF sur `/avatar/proxy`
- <span class="technology">SSRFmap --exploit aws</span> → récupération de credentials AWS EC2
- Rapport : pivot réseau + credentials exfiltrés

---

## Cheatlist SSRF

| Type | Outils |
|------|--------|
| Basic | Burp, ffuf |
| Blind | Burp Collaborator, dnslog.cn |
| Param discovery | Param Miner |
| Cloud | SSRFmap |
| Advanced | manual chaining |

---

## 🚀 Navigation

- 🚀 [[10_SSTI]]
