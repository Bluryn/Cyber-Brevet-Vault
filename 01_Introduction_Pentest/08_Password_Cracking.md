
## 🔐 Password Cracking

---

## Introduction

La phase de <span class="concept">Password Cracking</span> permet d’exploiter les informations obtenues (hashes, tickets, dumps) pour :

- Découvrir des mots de passe faibles ou réutilisés
- Étendre les accès dans l’AD / réseau
- Faciliter l’escalade de privilèges

Elle se divise en :
- <span class="concept">Offline cracking</span> (sur hash dump)
- <span class="concept">Online attack</span> (bruteforce / spraying)

---

## Objectifs

- <span class="goal">Récupérer des mots de passe en clair</span>
- <span class="goal">Identifier des réutilisations de credentials</span>
- <span class="goal">Préparer l’escalade ou le mouvement latéral</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">John The Ripper</span> | <span class="example">john --wordlist=rockyou.txt hashes.txt</span> |
| <span class="technology">Hashcat</span> | <span class="example">hashcat -m 1000 -a 0 hashes.txt rockyou.txt</span> |
| <span class="technology">Hydra</span> | <span class="example">hydra -l admin -P rockyou.txt ssh://target</span> |
| <span class="technology">CrackMapExec</span> | <span class="example">cme smb target -u users.txt -p passwords.txt</span> |
| <span class="technology">Rubeus</span> | <span class="example">kerberoast → hashcat</span> |
| <span class="technology">impacket-GetNPUsers</span> | <span class="example">AS-REP roasting → hashcat</span> |
| <span class="technology">Hash-Identifier</span> | <span class="example">identifier un hash inconnu</span> |

---

## Types de hash courants

| Hash / Format | Contexte |
|---------------|----------|
| NTLM (1000) | Windows |
| Kerberos TGS | AD Kerberoasting |
| mssql_sha1 | Bases MSSQL |
| bcrypt | Web modernes |
| md5(crypt) | Linux legacy |
| sha512crypt | Linux modernes |
| NetNTLMv2 | SMB challenge |

---

## Techniques principales

| Technique | Exemple |
|-----------|---------|
| <span class="concept">Offline cracking (hashes)</span> | John, Hashcat |
| <span class="concept">Bruteforce en ligne</span> | Hydra, CrackMapExec |
| <span class="concept">Spraying (compte AD)</span> | CrackMapExec spray mode |
| <span class="concept">Kerberoasting</span> | Rubeus + Hashcat |
| <span class="concept">AS-REP Roasting</span> | impacket-GetNPUsers |
| <span class="concept">Rainbow Tables</span> | pour hashes faibles (MD5...) |

---

## Bonnes pratiques

- <span class="best-practice">Ne jamais forcer en ligne sur des comptes sensibles (risque lockout)</span>
- <span class="best-practice">Respecter le périmètre autorisé (ex: pas d’attaque AD externe)</span>
- <span class="best-practice">Documenter les passwords trouvés et leur réutilisation</span>
- <span class="mitigation">Eviter les attaques trop bruyantes en prod</span>
- <span class="best-practice">Utiliser les bonnes "mode" Hashcat (-m)</span>

---

## 🎯 Exemple de scénario

> <span class="note">🔐 Cible :</span> Domaine Windows avec Kerberoasting

Actions :
- <span class="technology">Rubeus kerberoast</span> → extraction de hashes TGS
- <span class="technology">hashcat -m 13100 -a 0 kerberoast.hash rockyou.txt</span> → mot de passe admin découvert
- <span class="technology">cme smb target -u admin -p 'Summer2024!'</span> → accès latéral via SMB

> <span class="note">🐧 Cible :</span> Serveur Linux dump shadow

Actions :
- <span class="technology">unshadow passwd shadow > hashes.txt</span>
- <span class="technology">john --wordlist=rockyou.txt hashes.txt</span> → plusieurs comptes faibles crackés

---

## Cheatlist outils cracking

| Type | Outils |
|------|--------|
| Offline hashes | John, Hashcat |
| Bruteforce en ligne | Hydra, CME |
| AD / Kerberoasting | Rubeus, Hashcat |
| AS-REP | GetNPUsers, Hashcat |
| Rainbow / tables | rtgen + rcrack |

---

## 🚀 Navigation

- 🚀 [[01_Introduction_Pentest]]
- 🚀 [[02_Reconnaissance]]
