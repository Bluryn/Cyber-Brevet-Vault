
## ðŸš€ Privilege Escalation

---

## Introduction

AprÃ¨s avoir obtenu un premier accÃ¨s (shell ou compte utilisateur), la phase de <span class="concept">privilege escalation</span> vise Ã  passer vers des comptes ou privilÃ¨ges plus Ã©levÃ©s (ex: root, SYSTEM, Domain Admin).

Cela permet :
- Dâ€™obtenir un contrÃ´le Ã©tendu sur le systÃ¨me cible
- De persister
- De pivoter vers dâ€™autres machines

Cette phase est **clÃ©** en pentest interne et dans les Red Team engagements.

---

## Objectifs

- <span class="goal">Passer dâ€™un shell limitÃ© Ã  un compte Ã©levÃ© (root / SYSTEM)</span>
- <span class="goal">RÃ©cupÃ©rer des credentials ou tokens</span>
- <span class="goal">Atteindre un domaine ou environnement complet (AD)</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">linPEAS.sh</span> | <span class="example">./linpeas.sh -a</span> â†’ audit complet Linux |
| <span class="technology">winPEAS.exe</span> | <span class="example">winPEAS.exe /fast</span> â†’ audit complet Windows |
| <span class="technology">PowerUp.ps1</span> | <span class="example">Invoke-AllChecks</span> |
| <span class="technology">Sherlock.ps1</span> | <span class="example">Invoke-PsUacme</span> â†’ rechercher UAC bypass |
| <span class="technology">GTFOBins</span> | <span class="example">sudo -l â†’ usage de binaire dÃ©tournable</span> |
| <span class="technology">JuicyPotato / PrintSpoofer</span> | <span class="example">local privilege escalation Windows</span> |
| <span class="technology">Watson.exe</span> | <span class="example">Local PrivEsc checks Windows</span> |
| <span class="technology">BeRoot</span> | <span class="example">BeRoot.py -t linux</span> |
| <span class="technology">Les outils PEAS offlines</span> | Pour environnements restreints sans internet |

---

## Techniques principales

| Technique | Exemple |
|-----------|---------|
| <span class="concept">SUID / GUID abuse</span> | <span class="technology">find / -perm -4000 -type f 2>/dev/null</span> |
| <span class="concept">Kernel exploits</span> | searchsploit kernel version |
| <span class="concept">Token impersonation</span> | <span class="technology">PowerUp / incognito</span> |
| <span class="concept">Misconfig sudo</span> | <span class="technology">sudo -l â†’ GTFOBins</span> |
| <span class="concept">Unquoted service paths</span> | WinPEAS â†’ exploitation possible |
| <span class="concept">DLL hijacking</span> | Analyse avec Process Monitor |
| <span class="concept">Stored credentials</span> | <span class="technology">lsassy / mimikatz / gsecdump</span> |
| <span class="concept">Kerberoasting</span> | Impacket / Rubeus |

---

## Bonnes pratiques

- <span class="best-practice">Lister toutes les Ã©lÃ©vations possibles avant dâ€™agir</span>
- <span class="best-practice">Tester dâ€™abord les Ã©lÃ©vations "safe"</span> (sudo abuse, SUID)
- <span class="best-practice">Documenter chaque Ã©lÃ©vation rÃ©ussie</span>
- <span class="mitigation">Ne pas casser les services en prod</span>
- <span class="best-practice">Utiliser des outils PEAS offline si pas dâ€™accÃ¨s Internet</span>

---

## ðŸŽ¯ Exemple de scÃ©nario

> <span class="note">ðŸš€ Cible :</span> Linux webserver, accÃ¨s www-data avec reverse shell

Actions :
- <span class="technology">linpeas.sh -a</span> â†’ kernel 5.x vulnÃ©rable, sudo NOPASSWD trouvÃ©
- <span class="technology">sudo /usr/bin/vim</span> â†’ root shell avec GTFOBins
- Dump de /etc/shadow et rÃ©cupÃ©ration du hash root
- Scan latÃ©ral avec <span class="technology">ssh -J</span> vers autres machines
- RÃ©sultat : Ã©lÃ©vation Ã  root + pivot rÃ©seau

> <span class="note">ðŸªŸ Cible :</span> Windows Server, utilisateur standard

Actions :
- <span class="technology">winPEAS.exe /fast</span> â†’ unquoted path + service vulnÃ©rable
- Exploit avec <span class="technology">JuicyPotato</span> â†’ SYSTEM shell
- <span class="technology">lsassy</span> â†’ dump credentials AdminDomain
- Utilisation Impacket-psexec sur autre DC

---

## Cheatlist outils par OS

| OS | Outils clÃ©s |
|----|-------------|
| Linux | linPEAS, BeRoot, GTFOBins, manual kernel exploit |
| Windows | winPEAS, Sherlock, Watson, PowerUp, PrintSpoofer, JuicyPotato, lsassy, mimikatz |
| AD | CrackMapExec, BloodHound, Rubeus, Kerberoasting |

---

## ðŸš€ Navigation

- ðŸš€ [[07_Post_Exploitation]]
