## 🔍 Reconnaissance

---

## Introduction

La phase de <span class="concept">reconnaissance</span> constitue l’un des piliers fondamentaux d’un test d’intrusion réussi.

Elle permet de collecter un maximum d’informations sur la cible **sans provoquer d’alerte** et en optimisant le temps passé sur les phases actives.

On distingue généralement deux sous-phases :
- La <span class="concept">reconnaissance passive</span> → aucune interaction directe avec la cible (OSINT, WHOIS, certificats, Dorking…)
- La <span class="concept">reconnaissance active</span> → envoi de requêtes (DNS scanning, banner grabbing…)

Une <span class="best-practice">reconnaissance bien menée</span> permet de :
- Réduire les faux positifs lors du scanning
- Mieux cibler les attaques potentielles
- Gagner du temps sur la phase d’exploitation
- Anticiper les défenses en place

---

## Objectifs

- <span class="goal">Identifier la surface d’attaque externe</span>
- <span class="goal">Recueillir des informations organisationnelles et techniques</span>
- <span class="goal">Préparer une cartographie des services exposés</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">whois</span> | <span class="example">whois target.ch</span> → <span class="note">Recherche d’infos sur le registrar, ASN, contacts admin</span> |
| <span class="technology">dig</span> | <span class="example">dig any target.ch</span> → <span class="note">Interrogation DNS tous types de records</span> |
| <span class="technology">theHarvester</span> | <span class="example">theHarvester -d target.ch -b all</span> → <span class="note">`-d` : domaine, `-b all` : utiliser toutes les sources</span> |
| <span class="technology">amass</span> | <span class="example">amass enum -d target.ch</span> → <span class="note">Découverte avancée de sous-domaines</span> |
| <span class="technology">dnsrecon</span> | <span class="example">dnsrecon -d target.ch</span> → <span class="note">Analyse détaillée DNS</span> |
| <span class="technology">recon-ng</span> | <span class="example">Modules OSINT avancés</span> → <span class="note">Framework complet pour l’OSINT</span> |
| <span class="technology">crt.sh</span> | <span class="example">Recherche de sous-domaines via certificats SSL</span> |
| <span class="technology">Shodan / Censys</span> | <span class="example">Vue sur services et ports exposés publiquement</span> |
| <span class="technology">metagoofil</span> | <span class="example">Extraction de metadata sur PDF, DOC publiés en ligne</span> |
| <span class="technology">hunter.io</span> | <span class="example">Recherche d’e-mails professionnels associés au domaine</span> |

---

## Techniques passives

| Méthode | Outil |
|---------|------|
| <span class="concept">WHOIS</span> | <span class="technology">whois</span> |
| <span class="concept">OSINT réseaux sociaux</span> | LinkedIn, GitHub |
| <span class="concept">Google Dorking</span> | <span class="example">site:target.ch filetype:pdf</span> |
| <span class="concept">Analyse certificats</span> | <span class="technology">crt.sh</span> |
| <span class="concept">Recherche credentials publics</span> | Breach compilations, GitHub |

## Techniques actives

| Méthode | Outil |
|---------|------|
| <span class="concept">DNS scanning</span> | <span class="technology">amass</span>, <span class="technology">dnsrecon</span> |
| <span class="concept">Bruteforce DNS</span> | <span class="technology">sublist3r</span> |
| <span class="concept">Banner grabbing</span> | <span class="technology">curl -I</span> → <span class="note">Récupérer bannières serveur</span> |
| <span class="concept">Scanning Shodan / Censys</span> | <span class="technology">Shodan.io</span> → <span class="note">Visualiser les ports exposés en public</span> |

---

## Bonnes pratiques

- <span class="best-practice">Commencer toujours par la reconnaissance passive</span>
- <span class="best-practice">Documenter toutes les informations collectées</span>
- <span class="mitigation">Limiter les requêtes actives pour ne pas déclencher d'alertes prématurées</span>
- <span class="best-practice">Corréler plusieurs sources pour fiabiliser les données</span>

---

## 🎯 Exemple de scénario

> <span class="note">🔍 Contexte :</span> Audit externe d’un site e-commerce public `shop.target.ch`

Actions :
- <span class="technology">whois shop.target.ch</span> → ASN + registrar
- <span class="technology">theHarvester</span> → collecte d’e-mails
- <span class="technology">amass enum -d target.ch</span> → sous-domaines
- <span class="technology">crt.sh</span> → nouveaux sous-domaines via certificats
- <span class="technology">curl -I https://shop.target.ch</span> → Apache + version PHP
- <span class="technology">Shodan.io</span> → découverte de ports ouverts inattendus

---

## 🚀 Navigation

- 📡 [[03_Scanning]]
- 🧩 [[04_Enumeration]]